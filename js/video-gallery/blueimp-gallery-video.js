!function(a){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],a):a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(a,b){"use strict";a.extend(b.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var c=b.prototype.handleSlide;return a.extend(b.prototype,{handleSlide:function(a){c.call(this,a),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(b,c,d){var o,q,r,s,t,e=this,f=this.options,g=this.elementPrototype.cloneNode(!1),h=a(g),i=[{type:"error",target:g}],j=d||document.createElement("video"),k=this.getItemProperty(b,f.urlProperty),l=this.getItemProperty(b,f.typeProperty),m=this.getItemProperty(b,f.titleProperty),n=this.getItemProperty(b,f.videoPosterProperty),p=this.getItemProperty(b,f.videoSourcesProperty);if(h.addClass(f.videoContentClass),m&&(g.title=m),j.canPlayType)if(k&&l&&j.canPlayType(l))j.src=k;else for(;p&&p.length;)if(q=p.shift(),k=this.getItemProperty(q,f.urlProperty),l=this.getItemProperty(q,f.typeProperty),k&&l&&j.canPlayType(l)){j.src=k;break}return n&&(j.poster=n,o=this.imagePrototype.cloneNode(!1),a(o).addClass(f.toggleClass),o.src=n,o.draggable=!1,g.appendChild(o)),r=document.createElement("a"),r.setAttribute("target","_blank"),d||r.setAttribute("download",m),r.href=k,j.src&&(j.controls=!0,(d||a(j)).on("error",function(){e.setTimeout(c,i)}).on("pause",function(){j.seeking||(s=!1,h.removeClass(e.options.videoLoadingClass).removeClass(e.options.videoPlayingClass),t&&e.container.addClass(e.options.controlsClass),delete e.playingVideo,e.interval&&e.play())}).on("playing",function(){s=!1,h.removeClass(e.options.videoLoadingClass).addClass(e.options.videoPlayingClass),e.container.hasClass(e.options.controlsClass)?(t=!0,e.container.removeClass(e.options.controlsClass)):t=!1}).on("play",function(){window.clearTimeout(e.timeout),s=!0,h.addClass(e.options.videoLoadingClass),e.playingVideo=j}),a(r).on("click",function(a){e.preventDefault(a),s?j.pause():j.play()}),g.appendChild(d&&d.element||j)),g.appendChild(r),this.setTimeout(c,[{type:"load",target:g}]),g}}),b});